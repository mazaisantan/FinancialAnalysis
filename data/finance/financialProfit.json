{
    "code": "000000",
    "data": {
        "alias": "个股TTM财务利润表",
        "apiId": 378,
        "cacheUpdateMode": 0,
        "columnParam": 1,
        "command": "from dataset import DataSet\nfrom datasrc import DataSrc\n\nclass p_stock2332:\n    def __init__(self):\n        pass\n    \n    def process(self, kwargs):\n        scode,sdate,edate,state = None,None,None,None\n        if kwargs.has_key(\"scode\"):\n            scode = \"'\"+kwargs[\"scode\"].replace(\",\",\"','\")+\"'\"\n        if kwargs.has_key(\"sdate\"):\n            sdate = kwargs[\"sdate\"]\n        if kwargs.has_key(\"edate\"):\n            edate = kwargs[\"edate\"]\n        if kwargs.has_key(\"state\"):\n            state = int(kwargs[\"state\"])\n        \n        dtsrc = DataSrc()\n        sqlstr = \" select SECCODE,SECNAME,STARTDATE,ENDDATE,F001D,F002V,F003V,F006N,F007N,F008N,F009N,F010N,F011N,F012N,F013N,F014N,F015N,F016N,F017N,F018N,F019N,F020N,F021N,F022N,F023N,F024N,F025N,F026N,F027N,F028N,F029N,F030N,F031N,F033N,F034N,F035N,F036N,F037N,F038N,F039N,F040N,F041N,F042N,F043N,F044N,F045N,F046N,F047N,F048N,F049N,F050N,F051N,MEMO from STOCK2332 a where 1=1 \"\n        if scode is not None:\n            sqlstr = sqlstr + \" AND SECCODE in( %s) \"%scode\n        if sdate is not None:\n            sqlstr = sqlstr + \" AND ENDDATE >='%s' \"%sdate\n        if edate is not None:\n            sqlstr = sqlstr + \" AND ENDDATE <='%s' \"%edate       \n        if state is not None and state == 2:\n            if sdate is not None and edate is not None:\n                sqlstr = sqlstr + \" AND ENDDATE = (select max(b.ENDDATE) from STOCK2332 b where  a.SECCODE=b.SECCODE and b.ENDDATE>='%s' and b.ENDDATE<='%s' ) \"%(sdate,edate)\n            elif sdate is None and edate is not None:\n                sqlstr = sqlstr + \" AND ENDDATE = (select max(b.ENDDATE) from STOCK2332 b where  a.SECCODE=b.SECCODE  and b.ENDDATE<='%s' ) \"%edate\n            elif sdate is not None and edate is  None:\n                sqlstr = sqlstr + \" AND ENDDATE = (select max(b.ENDDATE) from STOCK2332 b where  a.SECCODE=b.SECCODE  and b.ENDDATE>='%s' ) \"%sdate\n            else:\n                sqlstr = sqlstr + \" AND ENDDATE = (select max(b.ENDDATE) from STOCK2332 b where  a.SECCODE=b.SECCODE ) \"\n        \n        dtset = dtsrc.readdb(sqlstr,'APIDB')\n        return dtset\n",
        "createUser": "admin",
        "dataType": 1,
        "del": 0,
        "fullUrl": "http://webapi.cninfo.com.cn/api/stock/p_stock2332",
        "funRelStatus": 0,
        "id": 378,
        "inputParameter": "[{\"fieldType\":\"string\",\"fieldChineseName\":\"股票代码\",\"isNeed\":\"1\",\"describe\":\"传单个股票；不可为空 \",\"fieldName\":\"scode\",\"defaultValue\":\"\",\"checkRule\":\"(\\\\d{6},){0,299}\\\\d{6}\"},{\"fieldType\":\"string\",\"fieldChineseName\":\"开始变动日期\",\"isNeed\":\"0\",\"describe\":\"支持格式示例：20161101 或2016-11-01 或2016/11/01\",\"fieldName\":\"sdate\",\"defaultValue\":\"\",\"checkRule\":\"[0-9]{8}|[0-9]{4}-[0-9]{2}-[0-9]{2}|[0-9]{4}/[0-9]{2}/[0-9]{2}\"},{\"fieldType\":\"string\",\"fieldChineseName\":\"结束变动日期\",\"isNeed\":\"0\",\"describe\":\"支持格式示例：20161101 或2016-11-01 或2016/11/01\",\"fieldName\":\"edate\",\"defaultValue\":\"\",\"checkRule\":\"[0-9]{8}|[0-9]{4}-[0-9]{2}-[0-9]{2}|[0-9]{4}/[0-9]{2}/[0-9]{2}\"},{\"fieldType\":\"int\",\"fieldChineseName\":\"查询状态\",\"isNeed\":\"0\",\"describe\":\"查询状态，1：历史所有数据，2.：最新一次数据   默认为历史所有数据\",\"fieldName\":\"state\",\"defaultValue\":\"\",\"checkRule\":\"[1-2]{1}\"},{\"fieldType\":\"string\",\"fieldChineseName\":\"结果集格式\",\"isNeed\":\"0\",\"describe\":\"设置结果返回的格式，可选的有xml、json、csv、dbf\",\"fieldName\":\"format\",\"defaultValue\":\"\",\"checkRule\":\"\"},{\"fieldType\":\"string\",\"fieldChineseName\":\"结果列选择\",\"isNeed\":\"0\",\"describe\":\"选择结果集中所需要的字段，多列用逗号分隔，如@column=a,b\",\"fieldName\":\"@column\",\"defaultValue\":\"\",\"checkRule\":\"\"},{\"fieldType\":\"int\",\"fieldChineseName\":\"结果条数限制\",\"isNeed\":\"0\",\"describe\":\"设置结果返回的条数\",\"fieldName\":\"@limit\",\"defaultValue\":\"\",\"checkRule\":\"\"},{\"fieldType\":\"string\",\"fieldChineseName\":\"结果集排序\",\"isNeed\":\"0\",\"describe\":\"设置结果集的格式，如 @orderby=id:desc  @orderby=id:asc\",\"fieldName\":\"@orderby\",\"defaultValue\":\"\",\"checkRule\":\"\"}]",
        "limitParam": 1,
        "maxRecordsParam": 0,
        "name": "p_stock2332",
        "orderbyParam": 1,
        "outputDescribes": "所有数据均取合并本期，除特殊情况外，一般规则为：\n一季度TTM = 一季报数据 + 上年年报 – 上年一季报;\n二季度TTM = 中报数据 + 上年年报 – 上年中报;\n三季度TTM = 三季报 + 上年报 – 上年三季报。\n不适用于以上规则的字段有：基本每股收益。\n计算方法为：\n一季度TTM：（一季报净利润 + 上年年报净利润 – 上年一季报净利润）/一季报实收资本（或股本）；\n二季度TTM：（中报净利润 + 上年年报净利润 – 上年中报净利润）/二季度实收资本（或股本）；\n三季度TTM： （三季报净利润  + 上年报净利润 – 上年三季报净利润 ）/三季报实收资本（或股本）；\n四季度TTM：年报披露值\n\n\n",
        "outputParameter": "[{\"fieldName\":\"SECCODE\",\"fieldChineseName\":\"证券代码\",\"fieldType\":\"varchar\",\"describe\":\"\"},{\"fieldName\":\"SECNAME\",\"fieldChineseName\":\"证券简称\",\"fieldType\":\"varchar\",\"describe\":\"\"},{\"fieldName\":\"STARTDATE\",\"fieldChineseName\":\"开始日期\",\"fieldType\":\"datetime\",\"describe\":\"\"},{\"fieldName\":\"ENDDATE\",\"fieldChineseName\":\"截止日期\",\"fieldType\":\"datetime\",\"describe\":\"\"},{\"fieldName\":\"F001D\",\"fieldChineseName\":\"报告年度\",\"fieldType\":\"datetime\",\"describe\":\"\"},{\"fieldName\":\"F002V\",\"fieldChineseName\":\"合并类型编码\",\"fieldType\":\"varchar\",\"describe\":\"\"},{\"fieldName\":\"F003V\",\"fieldChineseName\":\"合并类型\",\"fieldType\":\"varchar\",\"describe\":\"\"},{\"fieldName\":\"F006N\",\"fieldChineseName\":\"其中：营业收入\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F007N\",\"fieldChineseName\":\"其中：营业成本\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F008N\",\"fieldChineseName\":\"营业税金及附加\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F009N\",\"fieldChineseName\":\"销售费用\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F010N\",\"fieldChineseName\":\"管理费用\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F011N\",\"fieldChineseName\":\"堪探费用\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F012N\",\"fieldChineseName\":\"财务费用\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F013N\",\"fieldChineseName\":\"资产减值损失\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F014N\",\"fieldChineseName\":\"加：公允价值变动净收益\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F015N\",\"fieldChineseName\":\"投资收益\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F016N\",\"fieldChineseName\":\"其中：对联营企业和合营企业的投资收益_\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F017N\",\"fieldChineseName\":\"影响营业利润的其他科目\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F018N\",\"fieldChineseName\":\"三、营业利润\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F019N\",\"fieldChineseName\":\"加：补贴收入\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F020N\",\"fieldChineseName\":\"营业外收入\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F021N\",\"fieldChineseName\":\"减：营业外支出\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F022N\",\"fieldChineseName\":\"其中：非流动资产处置损失\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F023N\",\"fieldChineseName\":\"加：影响利润总额的其他科目\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F024N\",\"fieldChineseName\":\"四、利润总额\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F025N\",\"fieldChineseName\":\"减：所得税\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F026N\",\"fieldChineseName\":\"加：影响净利润的其他科目\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F027N\",\"fieldChineseName\":\"五、净利润\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F028N\",\"fieldChineseName\":\"归属于母公司所有者的净利润\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F029N\",\"fieldChineseName\":\"少数股东损益\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F030N\",\"fieldChineseName\":\"六、每股收益：\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F031N\",\"fieldChineseName\":\"（一）基本每股收益\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F033N\",\"fieldChineseName\":\"利息收入\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F034N\",\"fieldChineseName\":\"已赚保费\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F035N\",\"fieldChineseName\":\"一、营业总收入\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F036N\",\"fieldChineseName\":\"二、营业总成本\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F037N\",\"fieldChineseName\":\"汇兑收益\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F038N\",\"fieldChineseName\":\"七、其他综合收益\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F039N\",\"fieldChineseName\":\"八、综合收益总额\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F040N\",\"fieldChineseName\":\"其中：归属于母公司\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F041N\",\"fieldChineseName\":\"其中：归属于少数股东\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F042N\",\"fieldChineseName\":\"手续费及佣金收入\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F043N\",\"fieldChineseName\":\"利息支出\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F044N\",\"fieldChineseName\":\"手续费及佣金支出\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F045N\",\"fieldChineseName\":\"退保金\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F046N\",\"fieldChineseName\":\"赔付支出净额\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F047N\",\"fieldChineseName\":\"提取保险合同准备金净额\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F048N\",\"fieldChineseName\":\"保单红利支出\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F049N\",\"fieldChineseName\":\"分保费用\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F050N\",\"fieldChineseName\":\"其中：非流动资产处置利得\",\"fieldType\":\"numeric\",\"describe\":\"\"},{\"fieldName\":\"F051N\",\"fieldChineseName\":\"其他收益\",\"fieldType\":\"numeric\",\"describe\":\"\"}]",
        "prefixName": "stock",
        "status": 1,
        "tbRelStatus": 1,
        "type": 3,
        "updateUser": "admin",
        "url": "p_stock2332"
    },
    "msg": "success"
}